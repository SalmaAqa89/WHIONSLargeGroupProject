{% extends 'base/base_content2.html' %}
{% block content %}
<div class="container">
  <div class="row">
    <div class="col-12">
      <h2>Your Journal Log</h2>
      <div class="copy-div">
        <p>Here, you can browse through all your past memories, favorite the most cherished ones, delete those no longer needed, and seamlessly export your thoughts to PDF or RTF formats for safekeeping or sharing!</p>
      </div>
      
      <div class=" mt-3 log-btns">
        <a href="{% url 'create_entry' %}" class="btn btn-secondary mr-2">New Journal Entry</a>
        <button id="toggleSelect" class="btn btn-outline-success">Select</button>
      </div>

      <div class="card-deck mt-3">
        {% for entry in journal_entries %}
        {% if not entry.deleted %}
          <div class="card mb-3 entry-card" id="entry{{ entry.id }}">
            <div class="card-body ">
              <input type="checkbox" class="selectCheckbox" style="display:none;" data-entry-id="{{ entry.id }}">
              {% if entry.favourited %}
              <a href="{% url 'unfavourite_entry' entry_id=entry.id %}" class="favourite"><img src="http://www.clker.com/cliparts/g/R/o/O/K/1/simple-star-md.png" height="20" width="20" class="float-right"></a>
              {% else %}
              <a href="{% url 'favourite_entry' entry_id=entry.id %}" class="favourite"><img src="http://www.clker.com/cliparts/2/4/T/f/0/4/star-grey-md.png" height="20" width="20" class="float-right"></a>
              {% endif %}
              <h5 class="card-title">{{ entry.title }}</h5>
              <h6 class="card-subtitle mb-2 text-muted">{{ entry.created_at }}</h6>
              <p class="card-text">{{ entry.text|safe }}</p>
              <p>Feeling: {{ entry.get_mood_display }}</p>
              <div class="card-buttons">
                <a href="{% url 'delete_entry' entry_id=entry.id %}" class="btn btn-danger">Delete Entry</a>
                <a href="{% url 'edit_entry' pk=entry.id %}" class="btn btn-success">Edit Entry</a>
                
                <div class="dropdown">
                  <button class="btn btn-secondary dropdown-toggle" type="button" id="individualExportDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Export
                  </button>
                  <div class="dropdown-menu" aria-labelledby="individualExportDropdown">
                    <a class="dropdown-item" href="{% url 'export_journal_entry_to_pdf' entry_id=entry.id %}">Export to PDF</a>
                    <a class="dropdown-item" href="{% url 'export_journal_entry_to_rtf' entry_id=entry.id %}">Export to RTF</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
